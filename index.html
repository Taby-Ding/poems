<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小学生必背古诗词75首</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans SC', 'Microsoft YaHei', sans-serif;
        }
        
        :root {
            --primary: #4e7c9c;
            --primary-light: #6b9cc0;
            --secondary: #e74c3c;
            --accent: #f39c12;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --success: #27ae60;
            --danger: #e74c3c;
            --gray: #95a5a6;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        body {
            background: linear-gradient(135deg, #e0f7fa, #bbdefb);
            color: var(--dark);
            min-height: 100vh;
            padding-bottom: 60px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 25px 0;
            background: linear-gradient(120deg, var(--primary), var(--primary-light));
            color: white;
            border-radius: 0 0 20px 20px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text x="5" y="20" font-size="14" fill="rgba(255,255,255,0.1)">诗</text><text x="25" y="45" font-size="14" fill="rgba(255,255,255,0.1)">词</text><text x="50" y="70" font-size="14" fill="rgba(255,255,255,0.1)">中</text><text x="75" y="20" font-size="14" fill="rgba(255,255,255,0.1)">华</text></svg>');
            opacity: 0.3;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            position: relative;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        /* 如果要改变网页标题的字体大小，可以在这里调整h1的font-size值 */
        /* 例如：将font-size: 2.2rem; 改为font-size: 1.8rem; */
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .tabs {
            display: flex;
            background: white;
            border-radius: 50px;
            margin: 20px 0;
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
        }
        
        .tab:not(.active):hover {
            background: rgba(78, 124, 156, 0.1);
        }
        
        .tab i {
            margin-right: 8px;
        }
        
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 诗词列表样式 */
        .poem-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .poem-item {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 15px;
            border-left: 4px solid var(--primary);
        }
        
        .poem-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .poem-index {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .poem-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .poem-author {
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        /* 诗词详情页样式 */
        .poem-detail {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }
        
        .back-button {
            display: inline-flex;
            align-items: center;
            background: var(--primary);
            color: white;
            padding: 8px 15px;
            border-radius: 30px;
            margin-bottom: 20px;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-weight: 500;
        }
        
        .back-button:hover {
            background: var(--primary-light);
            transform: translateX(-3px);
        }
        
        .back-button i {
            margin-right: 5px;
        }
        
        .detail-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #e0e0e0;
        }
        
        .detail-title {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .detail-author {
            font-size: 1.1rem;
            color: var(--gray);
            font-style: italic;
        }
        
        .poem-content {
            font-size: 1.3rem;
            line-height: 1.8;
            text-align: center;
            margin: 25px 0;
            color: #2c3e50;
            font-weight: 500;
            white-space: pre-line;
        }
        
        .poem-explanation {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 12px;
            font-size: 1.05rem;
            line-height: 1.6;
            border-left: 3px solid var(--primary);
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .action-button {
            flex: 1;
            padding: 16px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: var(--shadow);
        }
        
        .recite-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
        }
        
        .game-btn {
            background: linear-gradient(135deg, var(--accent), #f1c40f);
        }
        
        .action-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        
        .action-button i {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        /* 背诵模式样式 */
        .recite-mode {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .recite-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .recite-title {
            font-size: 1.4rem;
            color: var(--primary);
        }
        
        .score-display {
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
        }
        
        .recite-content {
            font-size: 1.3rem;
            line-height: 1.8;
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }
        
        .blank-input {
            display: inline-block;
            min-width: 150px;
            border: none;
            border-bottom: 2px dashed var(--secondary);
            margin: 0 5px;
            text-align: center;
            font-size: 1.2rem;
            background: transparent;
            outline: none;
            color: var(--dark);
        }
        
        .blank-input:focus {
            border-bottom: 2px solid var(--primary);
        }
        
        .recite-controls {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        .recite-controls button {
            flex: 1;
            padding: 14px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .check-btn {
            background: var(--primary);
            color: white;
        }
        
        .exit-btn {
            background: var(--gray);
            color: white;
        }
        
        .error-count {
            text-align: center;
            margin-top: 15px;
            color: var(--danger);
            font-weight: 500;
        }
        
        /* 接龙游戏样式 */
        .game-mode {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .game-title {
            font-size: 1.4rem;
            color: var(--accent);
        }
        
        .game-question {
            font-size: 1.4rem;
            text-align: center;
            margin: 30px 0;
            line-height: 1.6;
            font-weight: 500;
            color: var(--dark);
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
        }
        
        .game-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .game-option {
            background: #f1f2f6;
            border: 2px solid #dfe4ea;
            border-radius: 12px;
            padding: 18px 10px;
            text-align: center;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .game-option:hover {
            background: #e4e6ed;
            transform: translateY(-3px);
        }
        
        .game-option.correct {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .game-option.incorrect {
            background: var(--danger);
            color: white;
            border-color: var(--danger);
        }
        
        .game-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px dashed #e0e0e0;
            font-weight: 500;
        }
        
        /* 响应式调整 */
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            header {
                padding: 15px 0;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 0.9rem;
            }
            
            .poem-list {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 10px;
            }
            
            .poem-item {
                height: 80px;
                padding: 10px;
            }
            
            .poem-title {
                font-size: 0.9rem;
                margin-bottom: 3px;
            }
            
            .poem-author {
                font-size: 0.75rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .recite-controls {
                flex-wrap: wrap;
            }
            
            .recite-controls button {
                min-width: calc(50% - 8px);
                margin-bottom: 10px;
            }
            
            .game-options {
                grid-template-columns: 1fr;
            }
            
            .game-question {
                font-size: 1.2rem;
                padding: 15px;
            }
            
            .poem-detail {
                padding: 15px;
            }
            
            .detail-title {
                font-size: 1.5rem;
            }
            
            .detail-author {
                font-size: 0.9rem;
            }
            
            .poem-content {
                font-size: 1.1rem;
            }
            
            .poem-explanation {
                font-size: 0.95rem;
                padding: 15px;
            }
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>小学生必背古诗词75首</h1>
            <div class="subtitle">品味诗词之美，传承文化精髓</div>
        </header>
        
        <div class="tabs">
            <div class="tab active" data-target="poem-list">
                <i class="fas fa-book"></i> 诗词列表
            </div>
            <div class="tab" data-target="recite-mode">
                <i class="fas fa-microphone"></i> 背诵模式
            </div>
            <div class="tab" data-target="game-mode">
                <i class="fas fa-puzzle-piece"></i> 诗词接龙
            </div>
        </div>
        
        <!-- 诗词列表部分 -->
        <div class="content-section active" id="poem-list">
            <div class="poem-list">
                <!-- 诗词列表由JS生成 -->
            </div>
        </div>
        
        <!-- 诗词详情部分 -->
        <div class="content-section" id="poem-detail">
            <button class="back-button" id="back-to-list">
                <i class="fas fa-arrow-left"></i> 返回列表
            </button>
            <div class="poem-detail">
                <div class="detail-header">
                    <h2 class="detail-title" id="detail-title">江南</h2>
                    <div class="detail-author" id="detail-author">（汉乐府）</div>
                </div>
                
                <div class="poem-content" id="poem-content">
                    江南可采莲，莲叶何田田。<br>
                    鱼戏莲叶东，鱼戏莲叶西，<br>
                    鱼戏莲叶南，鱼戏莲叶北。
                </div>
                
                <div class="poem-explanation" id="poem-explanation">
                    青年男女在江边采莲，茂盛的莲叶在江中生长，有些游鱼在莲叶间穿梭往还。
                    鱼儿一会儿游向东，一会儿游向西，一会儿游向南，一会儿游各北，无拘无束，怡然自得。
                </div>
                
                <div class="action-buttons">
                    <button class="action-button recite-btn" id="start-reciting">
                        <i class="fas fa-microphone-alt"></i>
                        背诵诗词
                    </button>
                    <button class="action-button game-btn" id="start-game">
                        <i class="fas fa-gamepad"></i>
                        诗词接龙
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 背诵模式部分 -->
        <div class="content-section" id="recite-mode">
            <div class="recite-mode">
                <div class="recite-header">
                    <h3 class="recite-title">背诵模式</h3>
                    <div class="score-display">得分: <span id="recite-score">0</span></div>
                </div>
                
                <div class="recite-content" id="recite-content">
                    <!-- 背诵内容由JS生成 -->
                </div>
                
                <div class="recite-controls">
                    <button class="check-btn" id="check-btn">检查答案</button>
                    <button class="exit-btn" id="recite-exit">退出</button>
                </div>
                
                <div class="error-count">
                    错误次数: <span id="error-count">0</span>/5
                </div>
            </div>
        </div>
        
        <!-- 接龙游戏部分 -->
        <div class="content-section" id="game-mode">
            <div class="game-mode">
                <div class="game-header">
                    <h3 class="game-title">诗词接龙</h3>
                    <div class="score-display">得分: <span id="game-score">0</span></div>
                </div>
                
                <div class="game-question" id="game-question">
                    <!-- 问题由JS生成 -->
                </div>
                
                <div class="game-options" id="game-options">
                    <!-- 选项由JS动态生成 -->
                </div>
                
                <div class="game-stats">
                    <div>正确: <span id="correct-count">0</span></div>
                    <div>错误: <span id="wrong-count">0</span>/5</div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>小学生必背古诗词75首学习平台 © 2025</p>
    </footer>

    <script>
        // 完整的75首诗词数据
        const poems = [
           { id: 1, title: "江南", author: "汉乐府", content: "江南可采莲，莲叶何田田。鱼戏莲叶东，鱼戏莲叶西，鱼戏莲叶南，鱼戏莲叶北。", explanation: "青年男女在江边采莲，茂盛的莲叶在江中生长，有些游鱼在莲叶间穿梭往还。鱼儿一会儿游向东，一会儿游向西，一会儿游向南，一会儿游各北，无拘无束，怡然自得。" },
            { id: 2, title: "长歌行", author: "汉乐府", content: "青青园中葵，朝露待日晞。阳春布德泽，万物生光辉。常恐秋节至，焜黄华叶衰。百川东到海，何时复西归?少壮不努力，老大徒伤悲。", explanation: "园中的葵菜都郁郁葱葱，晶莹的朝露阳光下飞升。春天把希望洒满了大地，万物都呈现出一派繁荣。常恐那肃杀的秋天来到，树叶儿黄落百草也凋零。百川奔腾着东流到大海，何时才能重新返回西境？少年人如果不及时努力，到老来只能是悔恨一生。" },
            { id: 3, title: "敕勒歌", author: "北朝民歌", content: "敕勒川，阴山下，天似穹庐，笼盖四野。天苍苍，野茫茫，风吹草低见牛羊。", explanation: "敕勒人生活的原野在阴山脚下，这里的天幕象毡帐篷一样笼罩着辽阔的大地。苍天浩渺无边，草原茫茫无际，每当大风儿吹来草儿低伏的时候，放牧的牛羊就显现出来。" },
            { id: 4, title: "咏鹅", author: "骆宾王", content: "鹅鹅鹅，曲项向天歌，白毛浮绿水，红掌拨清波。", explanation: "“呷哦，呷哦，”——多好看的鹅！曲着脖子仰起头，对着青天唱赞歌。雪白的毛，碧绿的水，一对鲜红的脚掌，轻轻地，拨弄起两行清清的水波。" },
            { id: 5, title: "风", author: "李峤", content: "解落三秋叶，能开二月花。过江千尺浪，入竹万竿斜。", explanation: "风，能使晚秋的树叶脱落，能催开早春二月的鲜花，它经过江河时能掀起千尺巨浪， 刮进竹林时可把万棵翠竹吹得歪歪斜斜。" },
            { id: 6, title: "咏柳", author: "贺知章", content: "碧玉妆成一树高，万条垂下绿丝绦。不知细叶谁裁出？二月春风似剪刀。", explanation: "如玉雕一样的新柳碧玉婆娑，无数柔嫩的柳条挂下来象丝带一样。细长的柳叶是谁剪出来的呢？原来二月的春风就是一把神奇的剪刀。" },
            { id: 7, title: "回乡偶书", author: "贺知章", content: "少小离家老大回，乡音无改鬓毛衰。儿童相见不相识，笑问客从何处来。", explanation: "我从小离开家乡年老才返回，我的乡音没变头发却已稀疏。家乡的儿童看我是远方的客人，他们笑着问我从何处来。" },
            { id: 8, title: "凉州词", author: "王之涣", content: "黄河远上白云间，一片孤城万仞山。羌笛何须怨杨柳，春风不度玉门关。", explanation: "黄河远远流淌直飞上白云端，孤零零一座边城屹立在崇山峻岭间。兵士们何必吹着羌笛奏起衰怨的《折杨柳》，温情的春风难以吹过玉门边关。" },
            { id: 9, title: "登鹳雀楼", author: "王之涣", content: "白日依山尽，黄河入海流。欲穷千里目，更上一层楼。", explanation: "太阳贴着山落下去了,黄河水滚滚流向大海。想要看到千里之外更壮观的景色,那就得再登上一层楼。" },
            { id: 10, title: "春晓", author: "孟浩然", content: "春眠不觉晓，处处闻啼鸟。夜来风雨声，花落知多少？", explanation: "春夜里贪睡眠不知不觉天已破晓，醒来时四处已传来鸟儿的啼叫。忽记起昨夜听到刮风下雨的声音，谁知道满枝盛开的花朵凋零多少。" },
            { id: 11, title: "凉州词", author: "王翰", content: "葡萄美酒夜光杯，欲饮琵琶马上催。醉卧沙场君莫笑，古来征战几人回？", explanation: "精美的酒杯中斟满了葡萄酒，战士们正在准备举杯开怀畅饮，琵琶声从远处传来，催促他们上马出发。战士们喝醉了躺在战场上。您可别见笑，自古以来当兵打仗，有几个能从战场上平平安安地回来啊！" },
            { id: 12, title: "出塞", author: "王昌龄", content: "秦时明月汉时关，万里长征人未还。但使龙城飞将在，不教胡马度阴山。", explanation: "还是秦时的明月汉时的边关，远离家乡的将士仍未回还。要是现在有像李广那样的统帅，绝不会让匈奴的军队侵扰阴山。" },
            { id: 13, title: "芙蓉楼送辛渐", author: "王昌龄", content: "寒雨连江夜入吴，平明送客楚山孤。洛阳亲友如相问，一片冰心在玉壶。", explanation: "冒着深秋冷雨，连夜到吴地，第二天清晨客人就要离去。客人走后，独留江南的我就像楚山一样孤单寂寞了。你回到洛阳，若是亲人们问起我，就说我的心像玉壶里的冰块一样晶莹透明，官场得失置之度外。" },
            { id: 14, title: "鹿柴", author: "王维", content: "空山不见人，但闻人语响。返景入深林，复照青苔上。", explanation: "空寂的山中看不见人影，只是偶尔听到来自林中的说话声。落日的余辉返照射入林海深处，又透过密林映照在幽暗的青苔上。" },
            { id: 15, title: "送元二使安西", author: "王维", content: "渭城朝雨浥轻尘，客舍青青柳色新。劝君更尽一杯酒，西出阳关无故人。", explanation: "清晨一场细雨使渭城空气格外清闲，旅舍那么明净，柳枝也像梳洗了一番。请您干了这杯酒吧，向西出了阳关，再也见不到老朋友了。" },
            { id: 16, title: "九月九日忆山东兄弟", author: "王维", content: "独在异乡为异客，每逢佳节倍思亲。遥知兄弟登高处，遍插茱萸少一人。", explanation: "独自一个人在他乡就是那里的外来人了，每次到了节日的时候更加思念亲人。在那遥远的家乡亲人们登高望远的时候，他们头插茱萸偏偏只少了我一个人吧！" },
            { id: 17, title: "静夜思", author: "李白", content: "床前明月光，疑是地上霜。举头望明月，低头思故乡。", explanation: "静静的夜晚，床前被明月的光辉照得一片洁白，几乎使人以为是地上铺了一层霜。仰头看看明月，不由得低头深深怀念遥远的家乡。" },
            { id: 18, title: "古朗月行", author: "李白", content: "小时不识月，呼作白玉盘。又疑瑶台镜，飞在青云端。", explanation: "小时候不认识月亮，把明月叫作白玉盘。又怀疑是瑶台仙镜，飞在夜空云彩中间。" },
            { id: 19, title: "望庐山瀑布", author: "李白", content: "日照香炉生紫烟，遥看瀑布挂前川。飞流直下三千尺，疑是银河落九天。", explanation: "太阳光照在香炉峰瀑布上，四周都升起紫色的烟雾，远远望去，瀑布像长河一般的垂挂下来；飞奔而下的水流，似乎有三千尺那么长，就好像银河从天上最高处直往下落一样。" },
            { id: 20, title: "赠汪伦", author: "李白", content: "李白乘舟将欲行，忽闻岸上踏歌声。桃花潭水深千尺，不及汪伦送我情。", explanation: "李白乘船将要起程，忽然听到岸上有人手拉着手，一边唱歌一边踏着节拍走来。即使桃花潭水千尺深，也比不上汪伦对我的深厚情谊。" },
            { id: 21, title: "黄鹤楼送孟浩然之广陵", author: "李白", content: "故人西辞黄鹤楼，烟花三月下扬州。孤帆远影碧空尽，唯见长江天际流。", explanation: "老朋友孟浩然辞别黄鹤楼到东边的扬州去了。这正是繁花似锦柳绿如烟的暮春三月。我望着他乘坐的那只小船越走越远，最后连那片白帆的影子也在水天相接的地方消失了。这时候只有滚滚的长江水向遥远的天边流去。" },
            { id: 22, title: "早发白帝城", author: "李白", content: "朝辞白帝彩云间，千里江陵一日还。两岸猿声啼不住，轻舟已过万重山。", explanation: "清晨，我告别高入云霄的白帝城；江陵远在千里，船行只需一日时间。两岸猿声，还在耳边不停地啼叫；不知不觉，轻舟已穿过万重青山。" },
            { id: 23, title: "望天门山", author: "李白", content: "天门中断楚江开，碧水东流至此回。两岸青山相对出，孤帆一片日边来。", explanation: "天门山从中间断开，长江畅通奔流，碧绿的江水向东流到这里回旋。东西两岸的东梁山和西梁山夹江对峙耸出来，有一只挂着帆的小船从太阳那边驶来。" },
            { id: 24, title: "别董大", author: "高适", content: "千里黄云白日曛，北风吹雁雪纷纷。莫愁前路无知己，天下谁人不识君？", explanation: "旷野茫茫，西沉的夕阳染黄了天边的乌云，风吹雁鸣，声音凄凉，大雪飘落。不要担心旅途中没有知心朋友，天下有谁不认识您呢？" },
            { id: 25, title: "绝句", author: "杜甫", content: "两个黄鹂鸣翠柳，一行白鹭上青天。窗含西岭千秋雪，门泊东吴万里船。", explanation: "两只黄鹂在翠绿的柳枝间鸣叫，一行白鹭在晴朗的蓝天飞翔。透过窗子望见积雪经年的西山雪岭，门外停泊着要到东吴远行的船只。" },
            { id: 26, title: "春夜喜雨", author: "杜甫", content: "好雨知时节，当春乃发生。随风潜入夜，润物细无声。野径云俱黑，江船火独明。晓看红湿处，花重锦官城。", explanation: "好雨像适应了季节变化，到了春天就降临。伴随着春风悄悄地飘洒在夜里，滋润着万物，细微而没有声音。田野里的小路、乌云，全部乌黑，只有江中船上的灯火明亮。到天亮时，再看那红色的湿漉漉的地方，春花沉甸甸的，妆点着锦官城。" },
            { id: 27, title: "绝句", author: "杜甫", content: "迟日江山丽，春风花草香。泥融飞燕子，沙暖睡鸳鸯。", explanation: "在初春明媚的阳光里，江边是多么美丽。和暖的春风轻轻吹着，草绿了，花开了，散发着阵阵清香。泥土解冻了，燕子忙碌地飞来飞去，衔泥造窝；沙子晒暖了，鸳鸯舒适地睡在沙洲上，成对成双。" },
            { id: 28, title: "江畔独步寻花", author: "杜甫", content: "黄师塔前江水东，春光懒困倚微风。桃花一簇开无主，可爱深红爱浅红。", explanation: "黄师塔前的江水向东流去，春光把人熏得又懒又困， 我倚仗着暖洋洋的春风游春。桃花一丛一丛地盛开着，仿佛是没有主人，你究竟是喜爱深红的桃花还是浅红色的桃花？" },
            { id: 29, title: "枫桥夜泊", author: "张继", content: "月落乌啼霜满天，江枫渔火对愁眠。姑苏城外寒山寺，夜半钟声到客船。", explanation: "月亮落下去了，乌鸦不时地啼叫，茫茫夜色中似乎弥漫着满天的霜华，面对江边隐约的枫树和江中闪烁的渔火，愁绪使我难以入眠。夜半时分，苏州城外的寒山寺的钟声，悠悠然飘荡到了客船。" },
            { id: 30, title: "滁州西涧", author: "韦应物", content: "独怜幽草涧边生，上有黄鹂深树鸣。春潮带雨晚来急，野渡无人舟自横。", explanation: "我喜爱生长在涧边的幽草，黄莺在幽深的树丛中啼鸣。春潮夹带着暮雨流的湍急，惟有无人的小船横向江心。" },
            { id: 31, title: "游子吟", author: "孟郊", content: "慈母手中线，游子身上衣。临行密密缝，意恐迟迟归。谁言寸草心，报得三春晖。", explanation: "慈母用手中的针线，为远行的儿子赶制身上的衣衫。临行前一针针密密地缝缀，怕的是儿子回来得晚衣服破损。有谁敢说，子女像小草那样微弱的孝心，能够报答得了像春晖普泽的慈母恩情呢？" },
            { id: 32, title: "早春呈水部张十八员外", author: "韩愈", content: "天街小雨润如酥，草色遥看近却无。最是一年春好处，绝胜烟柳满皇都。", explanation: "京城大道上空丝雨纷纷，它像酥油般细密而滋润，远望草色依稀连成一片，近看时却显得稀疏零星。这是一年中最美的季节，远胜过绿柳满城的春末。" },
            { id: 33, title: "渔歌子", author: "张志和", content: "西塞山前白鹭飞，桃花流水鳜鱼肥。青箬笠，绿蓑衣，斜风细雨不须归。", explanation: "西塞山前，白色的鹭鸶在欢快的翱翔，粉红色的桃花在迎春怒放，清澈碧绿的江水潺潺地流淌，鲜美的鳜鱼在水中自由自在地游动。戴上青箬笠，穿上绿蓑衣，在微风细雨中，悠闲地钓鱼，哪里还用得着回家呢！" },
            { id: 34, title: "塞下曲", author: "卢纶", content: "月黑雁飞高，单于夜遁逃。欲将轻骑逐，大雪满弓刀。", explanation: "没有月光的黑夜，大雁飞得很高。单于趁着黑夜偷偷地逃跑。将军正要率领轻装 的骑兵，追击逃敌，大雪纷纷，落满了将士们的弓刀。" },
            { id: 35, title: "望洞庭", author: "刘禹锡", content: "湖光秋月两相和，潭面无风镜未磨。遥望洞庭山水翠，白银盘里一青螺。", explanation: "辽阔的洞庭湖波光月色互相辉映，无风的湖面像一面镜子未曾打磨。遥望那湖上青翠的君山，活像白银盘里放一只青螺。" },
            { id: 36, title: "浪淘沙", author: "刘禹锡", content: "九曲黄河万里沙，浪淘风簸自天涯。如今直上银河去，同到牵牛织女家。", explanation: "弯弯曲曲的黄河流程万里黄沙，风簸水动波浪淘卷着泥沙从天边流来。今天我要沿黄河之水直上天河，与它一同到达牵牛织女的家门。" },
            { id: 37, title: "赋得古原草送别", author: "白居易", content: "离离原上草，一岁一枯荣。野火烧不尽，春风吹又生。远芳侵古道，晴翠接荒城。又送王孙去，萋萋满别情。", explanation: "原野上的青草是那样的茂密，一年一度，枯萎了又茂盛。野火也烧不死它，春风吹来它又显出勃勃生机。芳草的香气弥漫在整个古道之上，翠绿的青草连接着那荒远的城镇。又把朋友送走了，青青的草也充满了离别的深情。" },
            { id: 38, title: "池上", author: "白居易", content: "小娃撑小船，偷采白莲回。不解藏踪迹，浮萍一道开。", explanation: "一群娃娃撑了小船去偷采白莲玩，他们不晓得掩藏踪迹，浮萍被小船荡开，留下一条长长的水路。" },
            { id: 39, title: "忆江南", author: "白居易", content: "江南好，风景旧曾谙：日出江花红胜火，春来江水绿如蓝。能不忆江南？", explanation: "江南风景真美！那秀丽的景色早就熟谙。日出时，江边鲜艳的花儿，比火焰还红，春来时，清澈的江水碧绿如蓝。这般令人陶醉的景色，能不使人忆念？" },
            { id: 40, title: "小儿垂钓", author: "胡令能", content: "蓬头稚子学垂纶，侧坐莓台草映身。路人借问遥招手，怕得鱼惊不应人。", explanation: "一个头发蓬乱的小孩子正在学垂钓，侧身坐在青苔上绿草映衬着他的身影。遇到有人问路他老远就招着小手，唯恐怕鱼儿被吓跑他不敢大声应答。" },
            { id: 41, title: "悯农（一）", author: "李绅", content: "锄禾日当午，汗滴禾下土。谁知盘中餐，粒粒皆辛苦。", explanation: "农民在火辣辣的太阳底下锄地,汗水滴滴嗒嗒地掉在禾苗下的土地。可是有谁知道碗里的饭,每一粒都是农民用千辛万苦的劳动换来的。" },
            { id: 42, title: "悯农（二）", author: "李绅", content: "春种一粒粟，秋收万颗子。四海无闲田，农夫犹饿死。", explanation: "春天种下一颗种子，秋收时可以收获万颗子粒。普天之下并无闲置荒芜的田地，可是仍有农夫饿死。" },
            { id: 43, title: "江雪", author: "柳宗元", content: "千山鸟飞绝，万径人踪灭。孤舟蓑笠翁，独钓寒江雪。", explanation: "连绵的群山不见鸟的飞影，所有的路上难寻人的行踪。一条孤单的小船上，有一位披蓑戴笠的渔翁，独自在风雪寒冷的江上钓鱼。" },
            { id: 44, title: "寻隐者不遇", author: "贾岛", content: "松下问童子，言师采药去。只在此山中，云深不知处。", explanation: "在松树下，我询问童子，他说师父采药去了。只知道他就在这座山里，然而山高云深，真不知道他在哪里。" },
            { id: 45, title: "山行", author: "杜牧", content: "远上寒山石径斜，白云生处有人家。停车坐爱枫林晚，霜叶红于二月花。", explanation: "一条弯弯曲曲的小路蜿蜒伸向山顶，在白云飘浮的地方有几户人家。我停下车来是因为喜欢这枫林的景色，那火红的枫叶比二月的花还要红艳。" },
            { id: 46, title: "清明", author: "杜牧", content: "清明时节雨纷纷，路上行人欲断魂。借问酒家何处有？牧童遥指杏花村。", explanation: "清明节这天细雨纷纷，路上远行的人好像断魂一样迷乱凄凉。向人询问酒家哪里有，牧童远远地指了指杏花村。" },
            { id: 47, title: "江南春", author: "杜牧", content: "千里莺啼绿映红，水村山郭酒旗风；南朝四百八十寺，多少楼台烟雨中。", explanation: "千里辽阔的江南莺啼燕语，绿叶映衬红花，处处春意浓，水乡山城，酒店前的小旗迎风轻轻摆动。啊，昔日南朝建造的一座座寺庙，如今都隐现在一片迷茫的烟雨之中。" },
            { id: 48, title: "蜂", author: "罗隐", content: "不论平地与山尖，无限风光尽被占。采得百花成蜜后，为谁辛苦为谁甜。", explanation: "无论平原还是高山，凡是百花盛开的地方，都是蜜蜂的属地。采撷了百花酿成了香甜的蜂蜜，它们究竟为谁辛苦，为谁制造甘甜？" },
            { id: 49, title: "江上渔者", author: "范仲淹", content: "江上往来人，但爱鲈鱼美。君看一叶舟，出没风波里。", explanation: "江上来来往往的游人，只知道喜爱鲈鱼味道的鲜美。可是你们看一看，江里那如同一片落叶似的捕鱼船，在风浪里颠簸，时而涌上浪峰，时而陷入浪谷，多危险哪！" },
            { id: 50, title: "元日", author: "王安石", content: "爆竹声中一岁除，春风送暖入屠苏，千门万户曈曈日，总把新桃换旧符。", explanation: "鞭炮声中转眼一年就过去了，屠苏酒温暖着心房，春回大地。初升的太阳照的千家万户都是那么明亮，庆贺新年家家把新的桃符换上。" },
            { id: 51, title: "泊船瓜洲", author: "王安石", content: "京口瓜洲一水间，钟山只隔数重山。春风又绿江南岸，明月何时照我还。", explanation: "京口和瓜洲被长江水隔开了，瓜洲到南京中间只隔几座大山。春风吹来使江南沿岸一下子又变绿了，天上的明月啊，你什么时候才能照着我返回到家乡呢？" },
            { id: 52, title: "书湖阴先生壁", author: "王安石", content: "茅檐长扫净无苔，花木成畦手自栽。一水护田将绿绕，两山排闼送青来。", explanation: "茅草房庭院经常打扫，洁净得没有一丝青苔。花草树木成行满畦，都是主人亲手栽种。庭院外一条小河护卫着农田，把绿色的田地环绕，两座青山推开门，送来青翠的山色。" },
            { id: 53, title: "六月二十七日望湖楼醉书", author: "苏轼", content: "黑云翻墨未遮山，白雨跳珠乱入船。卷地风来忽吹散，望湖楼下水如天。", explanation: "黑云在天空翻滚，还未来得及遮住群山，又大又猛的雨点已倾盆而下，放眼望去，在湖光山色的衬托下，只见一片白而透明的雨色，落到湖面上的雨脚如珠，乱蹦乱跳，犹如万珠迸溅，射到船里来了。忽然吹来一阵风，将黑云骤雨一并吹散，于是呈现在眼前的，是水天合一、一片宁静的景象。" },
            { id: 54, title: "饮湖上初晴后雨", author: "苏轼", content: "水光潋滟晴方好，山色空蒙雨亦奇。欲把西湖比西子，淡妆浓抹总相宜。", explanation: "晴天的西湖，水上波光荡漾，闪烁耀眼，正好展示着那美丽的风貌；雨天的西湖，山中云雾朦胧，缥缥渺渺，又显出别一番奇妙景致。我想，最好把西湖比作西子，空蒙山色是她淡雅的妆饰，潋滟水光是她浓艳的粉脂，不管她怎样打扮，总能很好地烘托出天生丽质和迷人的神韵。" },
            { id: 55, title: "惠崇春江晓景", author: "苏轼", content: "竹外桃花三两枝，春江水暖鸭先知。蒌蒿满地芦芽短，正是河豚欲上时。", explanation: "竹林外两三枝桃花初放，鸭子在水中游戏，它们最先察觉了初春江水的回暖。河滩上已经满是蒌蒿，芦笋也开始抽芽，这些可都是烹调河豚的好佐料，而河豚此时正要逆流而上，从大海回游到江河里来了。" },
            { id: 56, title: "题西林壁", author: "苏轼", content: "横看成岭侧成峰，远近高低各不同。不识庐山真面目，只缘身在此山中。", explanation: "正看庐山，高岭横空；侧看庐山，峭拔成峰；远近高低，形象各异。为什么总看不清庐山真面目呢？恐怕只是因为自身在这山中的缘故吧！" },
            { id: 57, title: "夏日绝句", author: "李清照", content: "生当作人杰，死亦为鬼雄。至今思项羽，不肯过江东。", explanation: "活着应当是人中俊杰，死了也要做鬼中英雄。到今天我们特别怀念项羽，因为他死得悲壮，不肯回江东，屈辱偷生。" },
            { id: 58, title: "三衢道中", author: "曾几", content: "梅子黄时日日晴，小溪泛尽却山行。绿阴不减来时路，添得黄鹂四五声。", explanation: "梅子黄透了的时候，天天都是晴朗的好天气，乘小舟沿着小溪而行，走到了小溪的尽头，再改走山路继续前行。山路上苍翠的树，与来的时候一样浓密，深林丛中传来几声黄鹂的欢鸣声，比来时更增添了些幽趣。" },
            { id: 59, title: "示儿", author: "陆游", content: "死去元知万事空，但悲不见九州同。王师北定中原日，家祭无忘告乃翁。", explanation: "本来就知道人死了就什么都没有了，只是为看不见全中国统一而感到悲伤。宋朝的军队向北方进军，收复中原的时候，家祭时不要忘了把这件事告诉你们的父亲。" },
            { id: 60, title: "秋夜将晓出篱门迎凉有感", author: "陆游", content: "三万里河东入海，五千仞岳上摩天。遗民泪尽胡尘里，南望王师又一年。", explanation: "浩浩荡荡的黄河水，从天边流来，直向东奔去注入大海。连连绵绵的华山峰，挺立在西北高原，高接云霄。陷入金军统治下的老百姓流尽了悲苦的眼泪。他们张大眼睛向着南边盼望着，盼望着国家的军队能北上抗敌，唉，这样的情景啊，又是一年了！" },
            { id: 61, title: "四时田园杂兴（其一）", author: "范成大", content: "昼出耘田夜绩麻，村庄儿女各当家。童孙未解供耕织，也傍桑阴学种瓜。", explanation: "白天下田去除草，晚上搓麻线，全村年轻男女都不得闲，各司其事，各管一行。那些孩子们，不会耕也不会织，却也不闲着，也就在茂盛成阴的桑树底下学种瓜。" },
            { id: 62, title: "四时田园杂兴（其二）", author: "范成大", content: "梅子金黄杏子肥，麦花雪白菜花稀。日长篱落无人过，唯有蜻蜓蛱蝶飞。", explanation: "一树树梅子变得金黄，杏子也越长越大了；荞麦花一片雪白，油菜花倒显得稀稀落落。天长了，农民忙着在地里干活，中午也不回家，门前没有人走动；只有蜻蜓和蝴蝶绕着篱笆飞来飞去。" },
            { id: 63, title: "小池", author: "杨万里", content: "泉眼无声惜细流，树阴照水爱晴柔。小荷才露尖尖角，早有蜻蜓立上头。", explanation: "一道细流缓缓从泉眼中流出，没有一点声音；池畔的绿树在斜阳的照射下，将树阴投入水中，明暗斑驳，清晰可见。还未到盛夏，荷叶刚刚从水面露出一个尖尖角，一只小小的蜻蜓早已立在它的上头。" },
            { id: 64, title: "晓出净慈寺送林子方", author: "杨万里", content: "毕竟西湖六月中，风光不与四时同。接天莲叶无穷碧，映日荷花别样红。", explanation: "到底是六月里的西湖，景色和别的季节不一样：看上去碧绿色的荷叶无穷无尽，好像一直连接到天边；荷花映在早晨的阳光里，红得特别鲜艳。" },
            { id: 65, title: "春日", author: "朱熹", content: "胜日寻芳泗水滨，无边光景一时新。等闲识得东风面，万紫千红总是春。", explanation: "一个阳光灿烂的日子来到泗水河边观赏风景，眼前一眼望不到头的景色让人觉得耳目一新，其实春风吹来得时候人们一下子就能感觉到，因为放眼望去的万紫千红都在告诉你春天来了。" },
            { id: 66, title: "观书有感", author: "朱熹", content: "半亩方塘一鉴开，天光云影共徘徊。问渠那得清如许？为有源头活水来。", explanation: "半亩大的方形池塘像一面镜子一样展现在眼前，天空的光彩和浮云的影子都在镜子中一起移动。要问为什么那方塘的水会这样清澈呢？是因为有那永不枯竭的源头为它源源不断地输送活水啊。" },
            { id: 67, title: "题临安邸", author: "林升", content: "山外青山楼外楼，西湖歌舞几时休？暖风熏得游人醉，直把杭州作汴州。", explanation: "山外有青山楼外有高楼，西湖的歌舞什么时候才能停止？温暖的风把游人熏得仿佛喝醉了一般，简直把杭州当成了汴州。" },
            { id: 68, title: "游园不值", author: "叶绍翁", content: "应怜屐齿印苍苔，小扣柴扉久不开。春色满园关不住，一枝红杏出墙来。", explanation: "主人大概担心园内的青苔被木屐踩坏吧，我轻轻的敲着树枝做成的小门却一直没有人来开。但那满园美丽的春色怎么能关得住呢？一枝开得艳红的杏花早就悄悄地探出墙来了。" },
            { id: 69, title: "乡村四月", author: "翁卷", content: "绿遍山原白满川，子规声里雨如烟。乡村四月闲人少，才了蚕桑又插田。", explanation: "山地和平原上草木茂盛，到处绿油油的，河水涨得满满的，映着天光，呈现一片白色。在如烟似雾的蒙蒙细雨中，不时传来几声布谷鸟的啼鸣。繁忙的四月，家家户户都在忙碌不停，人们刚采来桑叶喂过蚕儿，就又忙着下田插稻秧。" },
            { id: 70, title: "墨梅", author: "王冕", content: "我家洗砚池头树，朵朵花开淡墨痕。不要人夸颜色好，只留清气满乾坤。", explanation: "我家小池边的梅树，花朵盛开，朵朵梅花都像是用淡淡的墨水点染而成的。它不想用鲜艳的色彩去吸引人，讨好人，求得人们的夸奖，只愿散发一股清香，让它留在天地之间。" },
            { id: 71, title: "石灰吟", author: "于谦", content: "千锤万凿出深山，烈火焚烧若等闲。粉身碎骨浑不怕，要留青白在人间。", explanation: "经过千万次的锤打才从深山里开采出来，把熊熊烈火的焚烧当做很平常的一件事。只要能把一片清白长留人间，就算粉身碎骨也无所畏惧。" },
            { id: 72, title: "竹石", author: "郑燮", content: "咬定青山不放松，立根原在破岩中。千磨万击还坚劲，任尔东西南北风。", explanation: "竹子把根深深地扎进破岩中，咬着青山毫不松口。竹石无论受到多大的折磨打击，仍然是那样坚定强劲，任凭来自东西南北的狂风猛刮。" },
            { id: 73, title: "所见", author: "袁枚", content: "牧童骑黄牛，歌声振林樾。意欲捕鸣蝉，忽然闭口立。", explanation: "牧童骑着黄牛在树林中高声歌唱，响亮的歌声在茂密的树林里振荡。忽然听到树上知了的叫声，牧童想去捉住知了，立即停止唱歌，跳下牛背。" },
            { id: 74, title: "村居", author: "高鼎", content: "草长莺飞二月天，拂堤杨柳醉春烟。儿童放学归来早，忙趁东风放纸鸢。", explanation: "绿草茂盛，黄莺飞舞，正是二月早春，轻拂堤岸的杨柳沉醉在烟雾之中。乡间的孩子们放学回来得很早，一个个借着东风愉快地放起了风筝。" },
            { id: 75, title: "己亥杂诗", author: "龚自珍", content: "九州生气恃风雷，万马齐喑究可哀。我劝天公重抖擞，不拘一格降人才。", explanation: "中华的生机倚仗变革的风雷，这般死气沉沉确实令人悲哀。我劝玉皇大帝重新振作精神，不受常规束缚降生各种人才。" }
        ];

        // 用于接龙游戏的诗词名句库 - 根据完整的诗词数据动态生成
        const famousLines = [];
        poems.forEach(poem => {
            const lines = poem.content.split(/[，。；？]/).filter(line => line.trim() !== '');
            lines.forEach(line => {
                famousLines.push({ content: line, poemId: poem.id });
            });
        });

        // DOM元素
        const tabs = document.querySelectorAll('.tab');
        const contentSections = document.querySelectorAll('.content-section');
        const poemList = document.querySelector('.poem-list');
        const backToListBtn = document.getElementById('back-to-list');
        const startRecitingBtn = document.getElementById('start-reciting');
        const startGameBtn = document.getElementById('start-game');
        const gameOptions = document.getElementById('game-options');
        const gameQuestion = document.getElementById('game-question');
        const reciteContent = document.getElementById('recite-content');
        
        // 游戏状态
        let currentPoem = null;
        let gameScore = 0;
        let correctCount = 0;
        let wrongCount = 0;
        let reciteScore = 0;
        let errorCount = 0;
        let currentGameQuestion = null;
        
        // 初始化诗词列表
        function initPoemList() {
            poemList.innerHTML = '';
            poems.forEach(poem => {
                const poemItem = document.createElement('div');
                poemItem.className = 'poem-item';
                poemItem.innerHTML = `
                    <div class="poem-index">${poem.id}</div>
                    <div class="poem-title">${poem.title}</div>
                    <div class="poem-author">${poem.author}</div>
                `;
                poemItem.addEventListener('click', () => showPoemDetail(poem));
                poemList.appendChild(poemItem);
            });
        }
        
        // 显示诗词详情
        function showPoemDetail(poem) {
            currentPoem = poem;
            document.getElementById('detail-title').textContent = poem.title;
            document.getElementById('detail-author').textContent = `(${poem.author})`;
            document.getElementById('poem-content').textContent = poem.content;
            document.getElementById('poem-explanation').textContent = poem.explanation;
            
            // 切换到详情页
            showSection('poem-detail');
        }
        
        // 显示指定部分
        function showSection(sectionId) {
            contentSections.forEach(section => {
                section.classList.remove('active');
                if (section.id === sectionId) {
                    section.classList.add('active');
                }
            });
        }
        
        // 初始化标签页切换
        function initTabs() {
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // 切换到游戏模式时生成新题目
                    if (tab.dataset.target === 'game-mode') {
                        generateGameQuestion();
                    }
                    
                    showSection(tab.dataset.target);
                });
            });
        }
        
        // 生成接龙游戏题目
        function generateGameQuestion() {
            const randomIndex = Math.floor(Math.random() * famousLines.length);
            const correctLine = famousLines[randomIndex];
            
            // 找到对应的诗词
            const poem = poems.find(p => p.id === correctLine.poemId);
            if (!poem) return;
            
            // 分割诗句
            const lines = poem.content.split(/[，。；？]/).filter(line => line.trim() !== '');
            const lineIndex = lines.findIndex(line => line.includes(correctLine.content));
            
            if (lineIndex === -1) return;
            
            // 构建问题
            let question = '';
            if (lineIndex === 0) {
                // 如果是第一句，问它的下一句
                question = `"${lines[lineIndex]}" 的下一句是什么？`;
                currentGameQuestion = { correct: lines[lineIndex + 1] };
            } else if (lineIndex === lines.length - 1) {
                // 如果是最后一句，问它的上一句
                question = `"${lines[lineIndex]}" 的上一句是什么？`;
                currentGameQuestion = { correct: lines[lineIndex - 1] };
            } else {
                // 中间句子，随机问上一句或下一句
                const askNext = Math.random() > 0.5;
                if (askNext) {
                    question = `"${lines[lineIndex]}" 的下一句是什么？`;
                    currentGameQuestion = { correct: lines[lineIndex + 1] };
                } else {
                    question = `"${lines[lineIndex]}" 的上一句是什么？`;
                    currentGameQuestion = { correct: lines[lineIndex - 1] };
                }
            }
            
            gameQuestion.textContent = question;
            
            // 生成选项（1个正确答案 + 3个干扰项）
            const options = [currentGameQuestion.correct];
            const samePoemLines = [...lines];
            samePoemLines.splice(lineIndex, 1); // 移除当前句子
            samePoemLines.splice(samePoemLines.indexOf(currentGameQuestion.correct), 1); // 移除正确答案
            
            while (options.length < 4 && samePoemLines.length > 0) {
                const randomLineIndex = Math.floor(Math.random() * samePoemLines.length);
                const randomLine = samePoemLines[randomLineIndex];
                if (!options.includes(randomLine)) {
                    options.push(randomLine);
                    samePoemLines.splice(randomLineIndex, 1);
                }
            }
            
            // 如果同一首诗中没有足够的干扰项，从其他诗中获取
            if (options.length < 4) {
                const otherLines = famousLines.filter(line => line.poemId !== poem.id);
                while (options.length < 4 && otherLines.length > 0) {
                    const randomIndex = Math.floor(Math.random() * otherLines.length);
                    const randomLine = otherLines[randomIndex];
                    if (!options.includes(randomLine.content)) {
                        options.push(randomLine.content);
                    }
                }
            }
            
            // 打乱选项顺序
            options.sort(() => Math.random() - 0.5);
            
            // 渲染选项
            gameOptions.innerHTML = '';
            options.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'game-option';
                optionElement.textContent = option;
                optionElement.addEventListener('click', () => checkGameAnswer(option, currentGameQuestion.correct));
                gameOptions.appendChild(optionElement);
            });
        }
        
        // 检查游戏答案
        function checkGameAnswer(selected, correct) {
            const options = document.querySelectorAll('.game-option');
            options.forEach(option => {
                option.classList.remove('correct', 'incorrect');
                if (option.textContent === correct) {
                    option.classList.add('correct');
                }
                if (option.textContent === selected && selected !== correct) {
                    option.classList.add('incorrect');
                }
            });
            
            if (selected === correct) {
                gameScore += 10;
                correctCount++;
                document.getElementById('game-score').textContent = gameScore;
                document.getElementById('correct-count').textContent = correctCount;
            } else {
                wrongCount++;
                document.getElementById('wrong-count').textContent = wrongCount;
                
                if (wrongCount >= 5) {
                    setTimeout(() => {
                        alert('游戏结束！错误次数已达5次');
                        showSection('poem-list');
                        wrongCount = 0;
                        document.getElementById('wrong-count').textContent = wrongCount;
                    }, 1000);
                }
            }
            
            // 1秒后进入下一题
            setTimeout(() => {
                generateGameQuestion();
            }, 1000);
        }
        
        // 生成背诵内容
        function generateReciteContent(poem) {
    const lines = poem.content.split(/[，。；？]/).filter(line => line.trim() !== '');
    let contentHTML = `
        <h3 style="margin-bottom: 15px; color: var(--primary);">${poem.title}</h3>
        <p>请填写空白处的诗句：</p>
    `;

    lines.forEach(line => {
        const showLine = Math.random() > 0.5; // 50%的概率显示整行
        
        if (showLine) {
            contentHTML += `<p>${line}</p>`;
        } else {
            contentHTML += `<p><input type="text" class="blank-input" data-answer="${line}"></p>`;
        }
    });
    
    reciteContent.innerHTML = contentHTML;
}
        
        // 检查背诵答案
        function checkReciteAnswer() {
            const inputs = document.querySelectorAll('.blank-input');
            let allCorrect = true;
            
            inputs.forEach(input => {
                const userAnswer = input.value.trim();
                const correctAnswer = input.dataset.answer;
                
                if (userAnswer === correctAnswer) {
                    input.style.color = '#27ae60';
                    input.style.borderBottom = '2px solid #27ae60';
                } else {
                    input.style.color = '#e74c3c';
                    input.style.borderBottom = '2px solid #e74c3c';
                    allCorrect = false;
                }
            });
            
            if (allCorrect) {
                reciteScore += 10;
                document.getElementById('recite-score').textContent = reciteScore;
                setTimeout(() => {
                    alert('恭喜！全部答对了！');
                    showSection('poem-detail');
                }, 500);
            } else {
                errorCount++;
                document.getElementById('error-count').textContent = errorCount;
                
                if (errorCount >= 5) {
                    setTimeout(() => {
                        alert('背诵结束！错误次数已达5次');
                        showSection('poem-detail');
                        errorCount = 0;
                        document.getElementById('error-count').textContent = errorCount;
                    }, 500);
                }
            }
        }
        
// 重置诗词标题显示
    if (currentPoem) {
        const titleElement = document.querySelector('.recite-content h3');
        if (titleElement) {
            titleElement.style.color = '';
        }
    }

      // 初始化事件监听
        function initEventListeners() {
            backToListBtn.addEventListener('click', () => {
                showSection('poem-list');
            });
            
            startRecitingBtn.addEventListener('click', () => {
                if (currentPoem) {
                    showSection('recite-mode');
                    generateReciteContent(currentPoem);
                    // 重置背诵状态
                    errorCount = 0;
                    document.getElementById('error-count').textContent = errorCount;
                    document.querySelectorAll('.blank-input').forEach(input => {
                        input.value = '';
                        input.style.color = '';
                        input.style.borderBottom = '2px dashed var(--secondary)';
                    });
                }
            });
            
            startGameBtn.addEventListener('click', () => {
                showSection('game-mode');
                generateGameQuestion();
            });
            
            // 检查答案按钮
            document.getElementById('check-btn').addEventListener('click', checkReciteAnswer);
            
            // 退出背诵按钮
            document.getElementById('recite-exit').addEventListener('click', () => {
                showSection('poem-detail');
            });
        }
     
	// 重置诗词标题显示
	    const titleElement = document.querySelector('.recite-content h3');
  	  if (titleElement) {
  	      titleElement.style.color = '';
   		 }
	
   
        // 初始化应用
        function initApp() {
            initPoemList();
            initTabs();
            initEventListeners();
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>

</html>
